<h3>{{ tracker.name }}</h3>
<div class="position-relative">
    <a href="{{ path('simplystream.edit_tracker', {id: tracker.id}) }}">Edit</a>
    <a href="{{ path('simplystream.get_tracker_overlay_total', {id: tracker.id}) }}">Total overlay</a>
    <a href="{{ path('simplystream.get_trackers') }}">Back</a>

    <button class="btn btn-primary position-absolute end-0">Share</button>
</div>

{% for section in tracker.sections %}
    <div data-section-order="{{ loop.index - 1 }}" class="my-4">
        <h5>{{ section.title }}</h5>

        <div class="container">
            <div class="row border-bottom border-2 border-dark">
                <div class="col-8">
                    <b>Cause</b>
                </div>

                <div class="col-2 text-end">
                    <b>Deaths</b>
                </div>

                <div class="col-2 text-end">
                    <b>Percent</b>
                </div>
            </div>

            {% if section.deaths |length > 0 %}
                {% set sectionDeaths = 0 %}
                {% for death in section.deaths %}
                    <div class="row p-1 {{ death.successful ? 'bg-success' : '' }}"
                         style="--bs-bg-opacity: .5"
                         id="{{ death.id }}">
                        <div class="col-8"
                             data-bs-toggle="tooltip"
                             data-bs-placement="top"
                             title="{{ death.alias }}">
                            {{ death.cause }}
                        </div>
                        <div class="col-2 text-end">{{ death.deaths }}</div>
                        <div class="col-2 text-end">{{ (total > 0 ? (death.deaths / total * 100) : 0) |number_format(2, ',', '.') }}</div>
                        {% set sectionDeaths = sectionDeaths + death.deaths %}
                    </div>
                {% endfor %}

                <div class="row border-top border-1 border-dark">
                    <div class="col-8 fw-bold">Total</div>
                    <div class="col-2 text-end">{{ sectionDeaths }}</div>
                    <div class="col-2 text-end">{{ (total > 0 ? (sectionDeaths / total * 100) : 0) |number_format(2, ',', '.') }}</div>
                </div>
            {% endif %}
        </div>
    </div>
{% endfor %}
